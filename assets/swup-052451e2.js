function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N.apply(this,arguments)}const Rt=e=>String(e).split(".").map(t=>String(parseInt(t||"0",10))).concat(["0","0"]).slice(0,3).join(".");let K=class{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(t=>t()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return typeof this.requires!="object"||Object.entries(this.requires).forEach(([t,n])=>{if(!function(i,o,s){const r=function(a,l){var c;if(a==="swup")return(c=l.version)!=null?c:"";{var u;const d=l.findPlugin(a);return(u=d==null?void 0:d.version)!=null?u:""}}(i,s);return!!r&&((a,l)=>l.every(c=>{const[,u,d]=c.match(/^([\D]+)?(.*)$/)||[];var h,p;return((f,m)=>{const v={"":g=>g===0,">":g=>g>0,">=":g=>g>=0,"<":g=>g<0,"<=":g=>g<=0};return(v[m]||v[""])(f)})((p=d,h=Rt(h=a),p=Rt(p),h.localeCompare(p,void 0,{numeric:!0})),u||">=")}))(r,o)}(t,n=Array.isArray(n)?n:[n],this.swup)){const i=`${t} ${n.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${i}`)}}),!0}on(t,n,i={}){var o;n=!(o=n).name.startsWith("bound ")||o.hasOwnProperty("prototype")?n.bind(this):n;const s=this.swup.hooks.on(t,n,i);return this.handlersToUnregister.push(s),s}once(t,n,i={}){return this.on(t,n,N({},i,{once:!0}))}before(t,n,i={}){return this.on(t,n,N({},i,{before:!0}))}replace(t,n,i={}){return this.on(t,n,N({},i,{replace:!0}))}off(t,n){return this.swup.hooks.off(t,n)}};const lt=new WeakMap;function ct(e,t,n,i){if(!e&&!lt.has(t))return!1;const o=lt.get(t)??new WeakMap;lt.set(t,o);const s=o.get(n)??new Set;o.set(n,s);const r=s.has(i);return e?s.add(i):s.delete(i),r&&e}function pe(e,t){let n=e.target;if(n instanceof Text&&(n=n.parentElement),n instanceof Element&&e.currentTarget instanceof Element){const i=n.closest(t);if(i&&e.currentTarget.contains(i))return i}}function me(e,t,n,i={}){const{signal:o,base:s=document}=i;if(o!=null&&o.aborted)return;const{once:r,...a}=i,l=s instanceof Document?s.documentElement:s,c=!!(typeof i=="object"?i.capture:i),u=p=>{const f=pe(p,String(e));if(f){const m=Object.assign(p,{delegateTarget:f});n.call(l,m),r&&(l.removeEventListener(t,u,a),ct(!1,l,n,d))}},d=JSON.stringify({selector:e,type:t,capture:c});ct(!0,l,n,d)||l.addEventListener(t,u,a),o==null||o.addEventListener("abort",()=>{ct(!1,l,n,d)})}function ge(e){for(var t=[],n=0;n<e.length;){var i=e[n];if(i==="*"||i==="+"||i==="?"){t.push({type:"MODIFIER",index:n,value:e[n++]});continue}if(i==="\\"){t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});continue}if(i==="{"){t.push({type:"OPEN",index:n,value:e[n++]});continue}if(i==="}"){t.push({type:"CLOSE",index:n,value:e[n++]});continue}if(i===":"){for(var o="",s=n+1;s<e.length;){var r=e.charCodeAt(s);if(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||r===95){o+=e[s++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:o}),n=s;continue}if(i==="("){var a=1,l="",s=n+1;if(e[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;){if(e[s]==="\\"){l+=e[s++]+e[s++];continue}if(e[s]===")"){if(a--,a===0){s++;break}}else if(e[s]==="("&&(a++,e[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));l+=e[s++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(n));if(!l)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:l}),n=s;continue}t.push({type:"CHAR",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}function ve(e,t){t===void 0&&(t={});for(var n=ge(e),i=t.prefixes,o=i===void 0?"./":i,s="[^".concat(D(t.delimiter||"/#?"),"]+?"),r=[],a=0,l=0,c="",u=function(P){if(l<n.length&&n[l].type===P)return n[l++].value},d=function(P){var R=u(P);if(R!==void 0)return R;var _=n[l],S=_.type,U=_.index;throw new TypeError("Unexpected ".concat(S," at ").concat(U,", expected ").concat(P))},h=function(){for(var P="",R;R=u("CHAR")||u("ESCAPED_CHAR");)P+=R;return P};l<n.length;){var p=u("CHAR"),f=u("NAME"),m=u("PATTERN");if(f||m){var v=p||"";o.indexOf(v)===-1&&(c+=v,v=""),c&&(r.push(c),c=""),r.push({name:f||a++,prefix:v,suffix:"",pattern:m||s,modifier:u("MODIFIER")||""});continue}var g=p||u("ESCAPED_CHAR");if(g){c+=g;continue}c&&(r.push(c),c="");var b=u("OPEN");if(b){var v=h(),O=u("NAME")||"",w=u("PATTERN")||"",T=h();d("CLOSE"),r.push({name:O||(w?a++:""),pattern:O&&!w?s:w,prefix:v,suffix:T,modifier:u("MODIFIER")||""});continue}d("END")}return r}function we(e,t){var n=[],i=zt(e,n,t);return ye(i,n,t)}function ye(e,t,n){n===void 0&&(n={});var i=n.decode,o=i===void 0?function(s){return s}:i;return function(s){var r=e.exec(s);if(!r)return!1;for(var a=r[0],l=r.index,c=Object.create(null),u=function(h){if(r[h]===void 0)return"continue";var p=t[h-1];p.modifier==="*"||p.modifier==="+"?c[p.name]=r[h].split(p.prefix+p.suffix).map(function(f){return o(f,p)}):c[p.name]=o(r[h],p)},d=1;d<r.length;d++)u(d);return{path:a,index:l,params:c}}}function D(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Wt(e){return e&&e.sensitive?"":"i"}function Se(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,o=n.exec(e.source);o;)t.push({name:o[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(e.source);return e}function be(e,t,n){var i=e.map(function(o){return zt(o,t,n).source});return new RegExp("(?:".concat(i.join("|"),")"),Wt(n))}function Ee(e,t,n){return Ae(ve(e,n),t,n)}function Ae(e,t,n){n===void 0&&(n={});for(var i=n.strict,o=i===void 0?!1:i,s=n.start,r=s===void 0?!0:s,a=n.end,l=a===void 0?!0:a,c=n.encode,u=c===void 0?function(U){return U}:c,d=n.delimiter,h=d===void 0?"/#?":d,p=n.endsWith,f=p===void 0?"":p,m="[".concat(D(f),"]|$"),v="[".concat(D(h),"]"),g=r?"^":"",b=0,O=e;b<O.length;b++){var w=O[b];if(typeof w=="string")g+=D(u(w));else{var T=D(u(w.prefix)),P=D(u(w.suffix));if(w.pattern)if(t&&t.push(w),T||P)if(w.modifier==="+"||w.modifier==="*"){var R=w.modifier==="*"?"?":"";g+="(?:".concat(T,"((?:").concat(w.pattern,")(?:").concat(P).concat(T,"(?:").concat(w.pattern,"))*)").concat(P,")").concat(R)}else g+="(?:".concat(T,"(").concat(w.pattern,")").concat(P,")").concat(w.modifier);else w.modifier==="+"||w.modifier==="*"?g+="((?:".concat(w.pattern,")").concat(w.modifier,")"):g+="(".concat(w.pattern,")").concat(w.modifier);else g+="(?:".concat(T).concat(P,")").concat(w.modifier)}}if(l)o||(g+="".concat(v,"?")),g+=n.endsWith?"(?=".concat(m,")"):"$";else{var _=e[e.length-1],S=typeof _=="string"?v.indexOf(_[_.length-1])>-1:_===void 0;o||(g+="(?:".concat(v,"(?=").concat(m,"))?")),S||(g+="(?=".concat(v,"|").concat(m,")"))}return new RegExp(g,Wt(n))}function zt(e,t,n){return e instanceof RegExp?Se(e,t):Array.isArray(e)?be(e,t,n):Ee(e,t,n)}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k.apply(null,arguments)}const At=(e,t)=>String(e).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||t||"",V=({hash:e}={})=>window.location.pathname+window.location.search+(e?window.location.hash:""),Te=(e,t={})=>{const n=k({url:e=e||V({hash:!0}),random:Math.random(),source:"swup"},t);window.history.pushState(n,"",e)},B=(e=null,t={})=>{e=e||V({hash:!0});const n=k({},window.history.state||{},{url:e,random:Math.random(),source:"swup"},t);window.history.replaceState(n,"",e)},Pe=(e,t,n,i)=>{const o=new AbortController;return i=k({},i,{signal:o.signal}),me(e,t,n,i),{destroy:()=>o.abort()}};let E=class tt extends URL{constructor(t,n=document.baseURI){super(t.toString(),n),Object.setPrototypeOf(this,tt.prototype)}get url(){return this.pathname+this.search}static fromElement(t){const n=t.getAttribute("href")||t.getAttribute("xlink:href")||"";return new tt(n)}static fromUrl(t){return new tt(t)}};const et=(e,t)=>{try{return we(e,t)}catch(n){throw new Error(`[swup] Error parsing path "${String(e)}":
${String(n)}`)}};let X=class extends Error{constructor(t,n){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=n.url,this.status=n.status,this.aborted=n.aborted||!1,this.timedOut=n.timedOut||!1}};async function ke(e,t={}){var n;e=E.fromUrl(e).url;const{visit:i=this.visit}=t,o=k({},this.options.requestHeaders,t.headers),s=(n=t.timeout)!=null?n:this.options.timeout,r=new AbortController,{signal:a}=r;t=k({},t,{headers:o,signal:a});let l,c=!1,u=null;s&&s>0&&(u=setTimeout(()=>{c=!0,r.abort("timeout")},s));try{l=await this.hooks.call("fetch:request",i,{url:e,options:t},(v,{url:g,options:b})=>fetch(g,b)),u&&clearTimeout(u)}catch(v){throw c?(this.hooks.call("fetch:timeout",i,{url:e}),new X(`Request timed out: ${e}`,{url:e,timedOut:c})):(v==null?void 0:v.name)==="AbortError"||a.aborted?new X(`Request aborted: ${e}`,{url:e,aborted:!0}):v}const{status:d,url:h}=l,p=await l.text();if(d===500)throw this.hooks.call("fetch:error",i,{status:d,response:l,url:h}),new X(`Server error: ${h}`,{status:d,url:h});if(!p)throw new X(`Empty response: ${h}`,{status:d,url:h});const{url:f}=E.fromUrl(h),m={url:f,html:p};return!i.cache.write||t.method&&t.method!=="GET"||e!==f||this.cache.set(m.url,m),m}let $e=class{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){const t=new Map;return this.pages.forEach((n,i)=>{t.set(i,k({},n))}),t}has(t){return this.pages.has(this.resolve(t))}get(t){const n=this.pages.get(this.resolve(t));return n&&k({},n)}set(t,n){n=k({},n,{url:t=this.resolve(t)}),this.pages.set(t,n),this.swup.hooks.callSync("cache:set",void 0,{page:n})}update(t,n){t=this.resolve(t);const i=k({},this.get(t),n,{url:t});this.pages.set(t,i)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(t){this.pages.forEach((n,i)=>{t(i,n)&&this.delete(i)})}resolve(t){const{url:n}=E.fromUrl(t);return this.swup.resolveUrl(n)}};const mt=(e,t=document)=>t.querySelector(e),W=(e,t=document)=>Array.from(t.querySelectorAll(e)),Kt=()=>new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})});function Tt(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Oe(e,t=[]){return new Promise((n,i)=>{const o=e(...t);Tt(o)?o.then(n,i):n(o)})}function _t(e,t){const n=e==null?void 0:e.closest(`[${t}]`);return n!=null&&n.hasAttribute(t)?(n==null?void 0:n.getAttribute(t))||!0:void 0}class Re{constructor(t){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=t}get selectors(){const{scope:t}=this.swup.visit.animation;return t==="containers"?this.swup.visit.containers:t==="html"?["html"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?W(this.selector):[]}add(...t){this.targets.forEach(n=>n.classList.add(...t))}remove(...t){this.targets.forEach(n=>n.classList.remove(...t))}clear(){this.targets.forEach(t=>{const n=t.className.split(" ").filter(i=>this.isSwupClass(i));t.classList.remove(...n)})}isSwupClass(t){return this.swupClasses.some(n=>t.startsWith(n))}}let Xt=class{constructor(t,n){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0;const{to:i,from:o,hash:s,el:r,event:a}=n;this.id=Math.random(),this.state=1,this.from={url:o??t.location.url,hash:t.location.hash},this.to={url:i,hash:s},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:r,event:a},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return this.state>=7}};function _e(e){return new Xt(this,e)}let xe=class{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){const n=this.registry.get(t);if(n)return n;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,n,i={}){const o=this.get(t);if(!o)return console.warn(`Hook '${t}' not found.`),()=>{};const s=k({},i,{id:o.size+1,hook:t,handler:n});return o.set(n,s),()=>this.off(t,n)}before(t,n,i={}){return this.on(t,n,k({},i,{before:!0}))}replace(t,n,i={}){return this.on(t,n,k({},i,{replace:!0}))}once(t,n,i={}){return this.on(t,n,k({},i,{once:!0}))}off(t,n){const i=this.get(t);i&&n?i.delete(n)||console.warn(`Handler for hook '${t}' not found.`):i&&i.clear()}async call(t,n,i,o){const[s,r,a]=this.parseCallArgs(t,n,i,o),{before:l,handler:c,after:u}=this.getHandlers(t,a);await this.run(l,s,r);const[d]=await this.run(c,s,r,!0);return await this.run(u,s,r),this.dispatchDomEvent(t,s,r),d}callSync(t,n,i,o){const[s,r,a]=this.parseCallArgs(t,n,i,o),{before:l,handler:c,after:u}=this.getHandlers(t,a);this.runSync(l,s,r);const[d]=this.runSync(c,s,r,!0);return this.runSync(u,s,r),this.dispatchDomEvent(t,s,r),d}parseCallArgs(t,n,i,o){return n instanceof Xt||typeof n!="object"&&typeof i!="function"?[n,i,o]:[void 0,n,i]}async run(t,n=this.swup.visit,i,o=!1){const s=[];for(const{hook:r,handler:a,defaultHandler:l,once:c}of t)if(n==null||!n.done){c&&this.off(r,a);try{const u=await Oe(a,[n,i,l]);s.push(u)}catch(u){if(o)throw u;console.error(`Error in hook '${r}':`,u)}}return s}runSync(t,n=this.swup.visit,i,o=!1){const s=[];for(const{hook:r,handler:a,defaultHandler:l,once:c}of t)if(n==null||!n.done){c&&this.off(r,a);try{const u=a(n,i,l);s.push(u),Tt(u)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${r}'.`)}catch(u){if(o)throw u;console.error(`Error in hook '${r}':`,u)}}return s}getHandlers(t,n){const i=this.get(t);if(!i)return{found:!1,before:[],handler:[],after:[],replaced:!1};const o=Array.from(i.values()),s=this.sortRegistrations,r=o.filter(({before:d,replace:h})=>d&&!h).sort(s),a=o.filter(({replace:d})=>d).filter(d=>!0).sort(s),l=o.filter(({before:d,replace:h})=>!d&&!h).sort(s),c=a.length>0;let u=[];if(n&&(u=[{id:0,hook:t,handler:n}],c)){const d=a.length-1,h=p=>{const f=a[p-1];return f?(m,v)=>f.handler(m,v,h(p-1)):n};u=[{id:0,hook:t,handler:a[d].handler,defaultHandler:h(d)}]}return{found:!0,before:r,handler:u,after:l,replaced:c}}sortRegistrations(t,n){var i,o;return((i=t.priority)!=null?i:0)-((o=n.priority)!=null?o:0)||t.id-n.id||0}dispatchDomEvent(t,n,i){if(n!=null&&n.done)return;const o={hook:t,args:i,visit:n||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:o,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${t}`,{detail:o,bubbles:!0}))}};const Ce=e=>{if(e&&e.charAt(0)==="#"&&(e=e.substring(1)),!e)return null;const t=decodeURIComponent(e);let n=document.getElementById(e)||document.getElementById(t)||mt(`a[name='${CSS.escape(e)}']`)||mt(`a[name='${CSS.escape(t)}']`);return n||e!=="top"||(n=document.body),n},G="transition",ut="animation";async function Le({selector:e,elements:t}){if(e===!1&&!t)return;let n=[];if(t)n=Array.from(t);else if(e&&(n=W(e,document.body),!n.length))return void console.warn(`[swup] No elements found matching animationSelector \`${e}\``);const i=n.map(o=>function(s){const{type:r,timeout:a,propCount:l}=function(c){const u=window.getComputedStyle(c),d=J(u,`${G}Delay`),h=J(u,`${G}Duration`),p=xt(d,h),f=J(u,`${ut}Delay`),m=J(u,`${ut}Duration`),v=xt(f,m),g=Math.max(p,v),b=g>0?p>v?G:ut:null;return{type:b,timeout:g,propCount:b?b===G?h.length:m.length:0}}(s);return!(!r||!a)&&new Promise(c=>{const u=`${r}end`,d=performance.now();let h=0;const p=()=>{s.removeEventListener(u,f),c()},f=m=>{m.target===s&&((performance.now()-d)/1e3<m.elapsedTime||++h>=l&&p())};setTimeout(()=>{h<l&&p()},a+1),s.addEventListener(u,f)})}(o));i.filter(Boolean).length>0?await Promise.all(i):e&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${e}\``)}function J(e,t){return(e[t]||"").split(", ")}function xt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Ct(n)+Ct(e[i])))}function Ct(e){return 1e3*parseFloat(e)}function Ve(e,t={},n={}){if(typeof e!="string")throw new Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(e,{el:n.el,event:n.event}))return void window.location.assign(e);const{url:i,hash:o}=E.fromUrl(e),s=this.createVisit(k({},n,{to:i,hash:o}));this.performNavigation(s,t)}async function Me(e,t={}){if(this.navigating){if(this.visit.state>=6)return e.state=2,void(this.onVisitEnd=()=>this.performNavigation(e,t));await this.hooks.call("visit:abort",this.visit,void 0),delete this.visit.to.document,this.visit.state=8}this.navigating=!0,this.visit=e;const{el:n}=e.trigger;t.referrer=t.referrer||this.location.url,t.animate===!1&&(e.animation.animate=!1),e.animation.animate||this.classes.clear();const i=t.history||_t(n,"data-swup-history");typeof i=="string"&&["push","replace"].includes(i)&&(e.history.action=i);const o=t.animation||_t(n,"data-swup-animation");var s,r;typeof o=="string"&&(e.animation.name=o),typeof t.cache=="object"?(e.cache.read=(s=t.cache.read)!=null?s:e.cache.read,e.cache.write=(r=t.cache.write)!=null?r:e.cache.write):t.cache!==void 0&&(e.cache={read:!!t.cache,write:!!t.cache}),delete t.cache;try{await this.hooks.call("visit:start",e,void 0),e.state=3;const a=this.hooks.call("page:load",e,{options:t},async(c,u)=>{let d;return c.cache.read&&(d=this.cache.get(c.to.url)),u.page=d||await this.fetchPage(c.to.url,u.options),u.cache=!!d,u.page});a.then(({html:c})=>{e.advance(5),e.to.html=c,e.to.document=new DOMParser().parseFromString(c,"text/html")});const l=e.to.url+e.to.hash;if(e.history.popstate||(e.history.action==="replace"||e.to.url===this.location.url?B(l):(this.currentHistoryIndex++,Te(l,{index:this.currentHistoryIndex}))),this.location=E.fromUrl(l),e.history.popstate&&this.classes.add("is-popstate"),e.animation.name&&this.classes.add(`to-${At(e.animation.name)}`),e.animation.wait&&await a,e.done||(await this.hooks.call("visit:transition",e,void 0,async()=>{if(!e.animation.animate)return await this.hooks.call("animation:skip",void 0),void await this.renderPage(e,await a);e.advance(4),await this.animatePageOut(e),e.animation.native&&document.startViewTransition?await document.startViewTransition(async()=>await this.renderPage(e,await a)).finished:await this.renderPage(e,await a),await this.animatePageIn(e)}),e.done))return;await this.hooks.call("visit:end",e,void 0,()=>this.classes.clear()),e.state=7,this.navigating=!1,this.onVisitEnd&&(this.onVisitEnd(),this.onVisitEnd=void 0)}catch(a){if(!a||a!=null&&a.aborted)return void(e.state=8);e.state=9,console.error(a),this.options.skipPopStateHandling=()=>(window.location.assign(e.to.url+e.to.hash),!0),window.history.back()}finally{delete e.to.document}}const Ue=async function(e){await this.hooks.call("animation:out:start",e,void 0,()=>{this.classes.add("is-changing","is-animating","is-leaving")}),await this.hooks.call("animation:out:await",e,{skip:!1},(t,{skip:n})=>{if(!n)return this.awaitAnimations({selector:t.animation.selector})}),await this.hooks.call("animation:out:end",e,void 0)},De=function(e){var t;const n=e.to.document;if(!n)return!1;const i=((t=n.querySelector("title"))==null?void 0:t.innerText)||"";document.title=i;const o=W('[data-swup-persist]:not([data-swup-persist=""])'),s=e.containers.map(r=>{const a=document.querySelector(r),l=n.querySelector(r);return a&&l?(a.replaceWith(l.cloneNode(!0)),!0):(a||console.warn(`[swup] Container missing in current document: ${r}`),l||console.warn(`[swup] Container missing in incoming document: ${r}`),!1)}).filter(Boolean);return o.forEach(r=>{const a=r.getAttribute("data-swup-persist"),l=mt(`[data-swup-persist="${a}"]`);l&&l!==r&&l.replaceWith(r)}),s.length===e.containers.length},qe=function(e){const t={behavior:"auto"},{target:n,reset:i}=e.scroll,o=n??e.to.hash;let s=!1;return o&&(s=this.hooks.callSync("scroll:anchor",e,{hash:o,options:t},(r,{hash:a,options:l})=>{const c=this.getAnchorElement(a);return c&&c.scrollIntoView(l),!!c})),i&&!s&&(s=this.hooks.callSync("scroll:top",e,{options:t},(r,{options:a})=>(window.scrollTo(k({top:0,left:0},a)),!0))),s},Fe=async function(e){if(e.done)return;const t=this.hooks.call("animation:in:await",e,{skip:!1},(n,{skip:i})=>{if(!i)return this.awaitAnimations({selector:n.animation.selector})});await Kt(),await this.hooks.call("animation:in:start",e,void 0,()=>{this.classes.remove("is-animating")}),await t,await this.hooks.call("animation:in:end",e,void 0)},Ie=async function(e,t){if(e.done)return;e.advance(6);const{url:n}=t;this.isSameResolvedUrl(V(),n)||(B(n),this.location=E.fromUrl(n),e.to.url=this.location.url,e.to.hash=this.location.hash),await this.hooks.call("content:replace",e,{page:t},(i,{})=>{if(this.classes.remove("is-leaving"),i.animation.animate&&this.classes.add("is-rendering"),!this.replaceContent(i))throw new Error("[swup] Container mismatch, aborting");i.animation.animate&&(this.classes.add("is-changing","is-animating","is-rendering"),i.animation.name&&this.classes.add(`to-${At(i.animation.name)}`))}),await this.hooks.call("content:scroll",e,void 0,()=>this.scrollToContent(e)),await this.hooks.call("page:view",e,{url:this.location.url,title:document.title})},He=function(e){var t;if(t=e,!!(t!=null&&t.isSwupPlugin)){if(e.swup=this,!e._checkRequirements||e._checkRequirements())return e._beforeMount&&e._beforeMount(),e.mount(),this.plugins.push(e),this.plugins}else console.error("Not a swup plugin instance",e)};function je(e){const t=this.findPlugin(e);if(t)return t.unmount(),t._afterUnmount&&t._afterUnmount(),this.plugins=this.plugins.filter(n=>n!==t),this.plugins;console.error("No such plugin",t)}function Ne(e){return this.plugins.find(t=>t===e||t.name===e||t.name===`Swup${String(e)}`)}function Be(e){if(typeof this.options.resolveUrl!="function")return console.warn("[swup] options.resolveUrl expects a callback function."),e;const t=this.options.resolveUrl(e);return t&&typeof t=="string"?t.startsWith("//")||t.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),e):t:(console.warn("[swup] options.resolveUrl needs to return a url"),e)}function Ye(e,t){return this.resolveUrl(e)===this.resolveUrl(t)}const We={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],ignoreVisit:(e,{el:t}={})=>!(t==null||!t.closest("[data-no-swup]")),linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:e=>e,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:e=>{var t;return((t=e.state)==null?void 0:t.source)!=="swup"},timeout:0};class ze{get currentPageUrl(){return this.location.url}constructor(t={}){var n,i;this.version="4.7.0",this.options=void 0,this.defaults=We,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=E.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=He,this.unuse=je,this.findPlugin=Ne,this.log=()=>{},this.navigate=Ve,this.performNavigation=Me,this.createVisit=_e,this.delegateEvent=Pe,this.fetchPage=ke,this.awaitAnimations=Le,this.renderPage=Ie,this.replaceContent=De,this.animatePageIn=Fe,this.animatePageOut=Ue,this.scrollToContent=qe,this.getAnchorElement=Ce,this.getCurrentUrl=V,this.resolveUrl=Be,this.isSameResolvedUrl=Ye,this.options=k({},this.defaults,t),this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new $e(this),this.classes=new Re(this),this.hooks=new xe(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=(n=(i=window.history.state)==null?void 0:i.index)!=null?n:1,this.enable()}async enable(){var t;const{linkSelector:n}=this.options;this.clickDelegate=this.delegateEvent(n,"click",this.handleLinkClick),window.addEventListener("popstate",this.handlePopState),this.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.options.native=this.options.native&&!!document.startViewTransition,this.options.plugins.forEach(i=>this.use(i)),((t=window.history.state)==null?void 0:t.source)!=="swup"&&B(null,{index:this.currentHistoryIndex}),await Kt(),await this.hooks.call("enable",void 0,void 0,()=>{const i=document.documentElement;i.classList.add("swup-enabled"),i.classList.toggle("swup-native",this.options.native)})}async destroy(){this.clickDelegate.destroy(),window.removeEventListener("popstate",this.handlePopState),this.cache.clear(),this.options.plugins.forEach(t=>this.unuse(t)),await this.hooks.call("disable",void 0,void 0,()=>{const t=document.documentElement;t.classList.remove("swup-enabled"),t.classList.remove("swup-native")}),this.hooks.clear()}shouldIgnoreVisit(t,{el:n,event:i}={}){const{origin:o,url:s,hash:r}=E.fromUrl(t);return o!==window.location.origin||!(!n||!this.triggerWillOpenNewWindow(n))||!!this.options.ignoreVisit(s+r,{el:n,event:i})}handleLinkClick(t){const n=t.delegateTarget,{href:i,url:o,hash:s}=E.fromElement(n);if(this.shouldIgnoreVisit(i,{el:n,event:t}))return;if(this.navigating&&o===this.visit.to.url)return void t.preventDefault();const r=this.createVisit({to:o,hash:s,el:n,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync("link:newtab",r,{href:i}):t.button===0&&this.hooks.callSync("link:click",r,{el:n,event:t},()=>{var a;const l=(a=r.from.url)!=null?a:"";t.preventDefault(),o&&o!==l?this.isSameResolvedUrl(o,l)||this.performNavigation(r):s?this.hooks.callSync("link:anchor",r,{hash:s},()=>{B(o+s),this.scrollToContent(r)}):this.hooks.callSync("link:self",r,void 0,()=>{this.options.linkToSelf==="navigate"?this.performNavigation(r):(B(o),this.scrollToContent(r))})})}handlePopState(t){var n,i,o,s;const r=(n=(i=t.state)==null?void 0:i.url)!=null?n:window.location.href;if(this.options.skipPopStateHandling(t)||this.isSameResolvedUrl(V(),this.location.url))return;const{url:a,hash:l}=E.fromUrl(r),c=this.createVisit({to:a,hash:l,event:t});c.history.popstate=!0;const u=(o=(s=t.state)==null?void 0:s.index)!=null?o:0;u&&u!==this.currentHistoryIndex&&(c.history.direction=u-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=u),c.animation.animate=!1,c.scroll.reset=!1,c.scroll.target=!1,this.options.animateHistoryBrowsing&&(c.animation.animate=!0,c.scroll.reset=!0),this.hooks.callSync("history:popstate",c,{event:t},()=>{this.performNavigation(c)})}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nt.apply(this,arguments)}function Lt(){return window.matchMedia("(hover: hover)").matches}function Z(e){return!!e&&(e instanceof HTMLAnchorElement||e instanceof SVGAElement)}const Vt=window.requestIdleCallback||(e=>setTimeout(e,1)),Ke=["preloadVisibleLinks"];let Xe=class extends K{constructor(t={}){var n;super(),n=this,this.name="SwupPreloadPlugin",this.requires={swup:">=4.5"},this.defaults={throttle:5,preloadInitialPage:!0,preloadHoveredLinks:!0,preloadVisibleLinks:{enabled:!1,threshold:.2,delay:500,containers:["body"],ignore:()=>!1}},this.options=void 0,this.queue=void 0,this.preloadObserver=void 0,this.preloadPromises=new Map,this.mouseEnterDelegate=void 0,this.touchStartDelegate=void 0,this.focusDelegate=void 0,this.onPageLoad=(s,r,a)=>{const{url:l}=s.to;return l&&this.preloadPromises.has(l)?this.preloadPromises.get(l):a(s,r)},this.onMouseEnter=async function(s){if(s.target!==s.delegateTarget||!Lt())return;const r=s.delegateTarget;if(!Z(r))return;const{url:a,hash:l}=E.fromElement(r),c=n.swup.createVisit({to:a,hash:l,el:r,event:s});n.swup.hooks.callSync("link:hover",c,{el:r,event:s}),n.preload(r,{priority:!0})},this.onTouchStart=s=>{if(Lt())return;const r=s.delegateTarget;Z(r)&&this.preload(r,{priority:!0})},this.onFocus=s=>{const r=s.delegateTarget;Z(r)&&this.preload(r,{priority:!0})};const{preloadVisibleLinks:i}=t,o=function(s,r){if(s==null)return{};var a,l,c={},u=Object.keys(s);for(l=0;l<u.length;l++)r.indexOf(a=u[l])>=0||(c[a]=s[a]);return c}(t,Ke);this.options=nt({},this.defaults,o),typeof i=="object"?this.options.preloadVisibleLinks=nt({},this.options.preloadVisibleLinks,{enabled:!0},i):this.options.preloadVisibleLinks.enabled=!!i,this.preload=this.preload.bind(this),this.queue=function(s=1){const r=[],a=[];let l=0,c=0;function u(){c<s&&l>0&&((a.shift()||r.shift()||(()=>{}))(),l--,c++)}return{add:function(d,h=!1){if(d.__queued){if(!h)return;{const p=r.indexOf(d);if(p>=0){const f=r.splice(p,1);l-=f.length}}}d.__queued=!0,(h?a:r).push(d),l++,l<=1&&u()},next:function(){c--,u()}}}(this.options.throttle)}mount(){const t=this.swup;t.options.cache?(t.hooks.create("page:preload"),t.hooks.create("link:hover"),t.preload=this.preload,t.preloadLinks=this.preloadLinks,this.replace("page:load",this.onPageLoad),this.preloadLinks(),this.on("page:view",()=>this.preloadLinks()),this.options.preloadVisibleLinks.enabled&&(this.preloadVisibleLinks(),this.on("page:view",()=>this.preloadVisibleLinks())),this.options.preloadHoveredLinks&&this.preloadLinksOnAttention(),this.options.preloadInitialPage&&this.preload(V())):console.warn("SwupPreloadPlugin: swup cache needs to be enabled for preloading")}unmount(){var t,n,i;this.swup.preload=void 0,this.swup.preloadLinks=void 0,this.preloadPromises.clear(),(t=this.mouseEnterDelegate)==null||t.destroy(),(n=this.touchStartDelegate)==null||n.destroy(),(i=this.focusDelegate)==null||i.destroy(),this.stopPreloadingVisibleLinks()}async preload(t,n={}){var i;let o,s;const r=(i=n.priority)!=null&&i;if(Array.isArray(t))return Promise.all(t.map(l=>this.preload(l)));if(Z(t))s=t,{href:o}=E.fromElement(t);else{if(typeof t!="string")return;o=t}if(!o)return;if(this.preloadPromises.has(o))return this.preloadPromises.get(o);if(!this.shouldPreload(o,{el:s}))return;const a=new Promise(l=>{this.queue.add(()=>{this.performPreload(o).catch(()=>{}).then(c=>l(c)).finally(()=>{this.queue.next(),this.preloadPromises.delete(o)})},r)});return this.preloadPromises.set(o,a),a}preloadLinks(){Vt(()=>{Array.from(document.querySelectorAll("a[data-swup-preload], [data-swup-preload-all] a")).forEach(t=>this.preload(t))})}preloadLinksOnAttention(){const{swup:t}=this,{linkSelector:n}=t.options,i={passive:!0,capture:!0};this.mouseEnterDelegate=t.delegateEvent(n,"mouseenter",this.onMouseEnter,i),this.touchStartDelegate=t.delegateEvent(n,"touchstart",this.onTouchStart,i),this.focusDelegate=t.delegateEvent(n,"focus",this.onFocus,i)}preloadVisibleLinks(){if(this.preloadObserver)return void this.preloadObserver.update();const{threshold:t,delay:n,containers:i}=this.options.preloadVisibleLinks;this.preloadObserver=function({threshold:o,delay:s,containers:r,callback:a,filter:l}){const c=new Map,u=new IntersectionObserver(f=>{f.forEach(m=>{m.isIntersecting?d(m.target):h(m.target)})},{threshold:o}),d=f=>{var m;const{href:v}=E.fromElement(f),g=(m=c.get(v))!=null?m:new Set;c.set(v,g),g.add(f),setTimeout(()=>{const b=c.get(v);b!=null&&b.size&&(a(f),u.unobserve(f),b.delete(f))},s)},h=f=>{var m;const{href:v}=E.fromElement(f);(m=c.get(v))==null||m.delete(f)},p=()=>{Vt(()=>{const f=r.map(m=>`${m} a[*|href]`).join(", ");Array.from(document.querySelectorAll(f)).filter(m=>l(m)).forEach(m=>u.observe(m))})};return{start:()=>p(),stop:()=>u.disconnect(),update:()=>(c.clear(),p())}}({threshold:t,delay:n,containers:i,callback:o=>this.preload(o),filter:o=>{if(this.options.preloadVisibleLinks.ignore(o)||!o.matches(this.swup.options.linkSelector))return!1;const{href:s}=E.fromElement(o);return this.shouldPreload(s,{el:o})}}),this.preloadObserver.start()}stopPreloadingVisibleLinks(){this.preloadObserver&&this.preloadObserver.stop()}shouldPreload(t,{el:n}={}){const{url:i,href:o}=E.fromUrl(t);return!(!function(){if(navigator.connection){var s;if(navigator.connection.saveData||(s=navigator.connection.effectiveType)!=null&&s.endsWith("2g"))return!1}return!0}()||this.swup.cache.has(i)||this.preloadPromises.has(i)||this.swup.shouldIgnoreVisit(o,{el:n})||n&&this.swup.resolveUrl(i)===this.swup.resolveUrl(V()))}async performPreload(t){var n=this;const{url:i}=E.fromUrl(t),o=this.swup.createVisit({to:i});return await this.swup.hooks.call("page:preload",o,{url:i},async function(r,a){return a.page=await n.swup.fetchPage(t,{visit:r}),a.page})}};(function(){if(!(typeof window>"u"||typeof document>"u"||typeof HTMLElement>"u")){var e=!1;try{var t=document.createElement("div");t.addEventListener("focus",function(s){s.preventDefault(),s.stopPropagation()},!0),t.focus(Object.defineProperty({},"preventScroll",{get:function(){if(navigator&&typeof navigator.userAgent<"u"&&navigator.userAgent&&navigator.userAgent.match(/Edge\/1[7-8]/))return e=!1;e=!0}}))}catch{}if(HTMLElement.prototype.nativeFocus===void 0&&!e){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var n=function(s){for(var r=s.parentNode,a=[],l=document.scrollingElement||document.documentElement;r&&r!==l;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&a.push([r,r.scrollTop,r.scrollLeft]),r=r.parentNode;return r=l,a.push([r,r.scrollTop,r.scrollLeft]),a},i=function(s){for(var r=0;r<s.length;r++)s[r][0].scrollTop=s[r][1],s[r][0].scrollLeft=s[r][2];s=[]},o=function(s){if(s&&s.preventScroll){var r=n(this);if(typeof setTimeout=="function"){var a=this;setTimeout(function(){a.nativeFocus(),i(r)},0)}else this.nativeFocus(),i(r)}else this.nativeFocus()};HTMLElement.prototype.focus=o}}})();function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gt.apply(this,arguments)}function Mt(e,t){return Object.keys(t).reduce((n,i)=>n.replace(`{${i}}`,t[i]||""),e||"")}let Ge=class{constructor(){var t;this.id="swup-announcer",this.style="position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;",this.region=void 0,this.region=(t=this.getRegion())!=null?t:this.createRegion()}getRegion(){return document.getElementById(this.id)}createRegion(){const t=function(n){const i=document.createElement("template");return i.innerHTML=n,i.content.children[0]}(`<p aria-live="assertive" aria-atomic="true" id="${this.id}" style="${this.style}"></p>`);return document.body.appendChild(t),t}announce(t,n=0){return new Promise(i=>{setTimeout(()=>{this.region.textContent===t&&(t=`${t}.`),this.region.textContent="",this.region.textContent=t,i()},n)})}};function Ut(e){let t;if(t=typeof e=="string"?document.querySelector(e):e,!(t instanceof HTMLElement))return;const n=t.getAttribute("tabindex");t.setAttribute("tabindex","-1"),t.focus({preventScroll:!0}),n!==null&&t.setAttribute("tabindex",n)}class Je extends K{constructor(t={}){super(),this.name="SwupA11yPlugin",this.requires={swup:">=4"},this.defaults={headingSelector:"h1",respectReducedMotion:!0,autofocus:!1,announcements:{visit:"Navigated to: {title}",url:"New page at {url}"}},this.options=void 0,this.announcer=void 0,this.announcementDelay=100,this.rootSelector="body",this.handleAnchorScroll=(n,{hash:i})=>{const o=this.swup.getAnchorElement(i);o instanceof HTMLElement&&Ut(o)},this.options=gt({},this.defaults,t),this.announcer=new Ge}mount(){this.swup.hooks.create("content:announce"),this.swup.hooks.create("content:focus"),this.before("visit:start",this.prepareVisit),this.on("visit:start",this.markAsBusy),this.on("visit:end",this.unmarkAsBusy),this.on("visit:end",this.focusContent),this.on("visit:end",this.announceContent),this.on("scroll:anchor",this.handleAnchorScroll),this.before("visit:start",this.disableAnimations),this.before("link:self",this.disableAnimations),this.before("link:anchor",this.disableAnimations),this.swup.announce=this.announce.bind(this)}unmount(){this.swup.announce=void 0}async announce(t){await this.announcer.announce(t)}markAsBusy(){document.documentElement.setAttribute("aria-busy","true")}unmarkAsBusy(){document.documentElement.removeAttribute("aria-busy")}prepareVisit(t){t.a11y={announce:void 0,focus:this.rootSelector}}announceContent(t){this.swup.hooks.callSync("content:announce",t,void 0,n=>{n.a11y.announce===void 0&&(n.a11y.announce=this.getPageAnnouncement()),n.a11y.announce&&this.announcer.announce(n.a11y.announce,this.announcementDelay)})}focusContent(t){this.swup.hooks.callSync("content:focus",t,void 0,n=>{n.a11y.focus&&(this.options.autofocus&&function(){const i=function(){const o=document.querySelector("body [autofocus]");if(o&&!o.closest('[inert], [aria-disabled], [aria-hidden="true"]'))return o}();return!!i&&(i!==document.activeElement&&i.focus(),!0)}()===!0||Ut(n.a11y.focus))})}getPageAnnouncement(){const{headingSelector:t,announcements:n}=this.options;return function({headingSelector:i="h1",announcements:o={}}){var s,r;const a=document.documentElement.lang||"*",{href:l,url:c,pathname:u}=E.fromUrl(window.location.href),d=(s=(r=o[a])!=null?r:o["*"])!=null?s:o;if(typeof d!="object")return;const h=document.querySelector(i);h||console.warn(`SwupA11yPlugin: No main heading (${i}) found on new page`);const p=(h==null?void 0:h.getAttribute("aria-label"))||(h==null?void 0:h.textContent)||document.title||Mt(d.url,{href:l,url:c,path:u});return Mt(d.visit,{title:p,href:l,url:c,path:u})}({headingSelector:t,announcements:n})}disableAnimations(t){this.options.respectReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(t.animation.animate=!1,t.scroll.animate=!1)}}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},M.apply(null,arguments)}window.process||(window.process={}),window.process.env||(window.process.env={});const Gt=["test"].includes("production"),y=["development","test"].includes("production"),Jt=(e,t,n)=>e==null?e:`\x1B[${t}m${String(e)}\x1B[${n}m`,ht=e=>Gt?e:`🧩 ${(t=>Jt(t,1,22))(e)}`,$=e=>Gt?e:(t=>Jt(t,94,39))(e);class Ze{log(...t){const n=t.shift();console.log(ht(n),...t)}warn(...t){const n=t.shift();console.warn(ht(n),...t)}error(...t){const n=t.shift();console.error(ht(n),...t)}logIf(t,...n){t&&this.log(...n)}warnIf(t,...n){t&&this.warn(...n)}errorIf(t,...n){t&&this.error(...n)}}const Zt=e=>{(function({parsedRules:t,swup:n,logger:i}){const o=n.getCurrentUrl();t.filter(s=>s.matchesFrom(o)||s.matchesTo(o)).forEach(s=>{s.containers.forEach(r=>{const a=it(`${r}:not([data-swup-fragment])`,n);if(!a)return;const l=a.getAttribute("data-swup-fragment-url");l&&y&&(i==null||i.log(`fragment url ${$(l)} for ${$(r)} provided by server`));const{url:c}=E.fromUrl(l||o);a.setAttribute("data-swup-fragment",""),a.__swupFragment={url:c,selector:r}})})})(e),function({logger:t,swup:n}){const i="data-swup-link-to-fragment";document.querySelectorAll(`a[${i}]`).forEach(o=>{var s;const r=o.getAttribute(i);if(!r)return void(y&&(t==null||t.warn(`[${i}] needs to contain a valid fragment selector`)));const a=it(r,n);if(!a)return void(y&&(t==null||t.log(`ignoring ${$(`[${i}="${r}"]`)} as ${$(r)} is missing`)));const l=(s=a.__swupFragment)==null?void 0:s.url;l?(Pt(l,n.getCurrentUrl())&&y&&(t==null||t.warn(`The fragment URL of ${r} is identical to the current URL. This could mean that [data-swup-fragment-url] needs to be provided by the server.`)),o.href=l):y&&(t==null||t.warn(`no fragment infos found on ${r}`))})}(e),function({logger:t}){document.querySelectorAll("dialog[data-swup-fragment]").forEach(n=>{n.__swupFragment?n.__swupFragment.modalShown||(n.__swupFragment.modalShown=!0,n.removeAttribute("open"),n.showModal==null||n.showModal(),n.addEventListener("keydown",i=>i.key==="Escape"&&i.preventDefault())):y&&(t==null||t.warn("fragment properties missing on element:",n))})}(e)},vt=(e,t)=>{var n;const i=(n=e.__swupFragment)==null?void 0:n.url;return!!i&&Pt(i,t)},Pt=(e,t)=>Dt(e)===Dt(t),Dt=e=>{if(!e.trim())return e;const t=E.fromUrl(e);return t.searchParams.sort(),t.pathname.replace(/\/+$/g,"")+t.search},Qt=e=>{const t=e.from.url,n=e.to.url;if(t&&n)return{from:t,to:n}},kt=(e,t)=>{if(e==null||!e.name)return;const{name:n,containers:i}=e;i.forEach(o=>{var s;(s=document.querySelector(o))==null||s.classList.toggle(`to-${n}`,t)})},te=(e,t,n)=>t.find(i=>i.matches(e,n));function ee(e){return!!e&&e.containers.every(t=>{var n;return((n=document.querySelector(t))==null||(n=n.tagName)==null?void 0:n.toLowerCase())==="template"})}function it(e,t){for(const n of t.options.containers){const i=document.querySelector(n);if(i!=null&&i.matches(e))return i;const o=i==null?void 0:i.querySelector(e);if(o)return o}}function qt(e){if(!Array.isArray(e))throw new Error("cloneRules() expects an array of rules");return e.map(t=>M({},t,{from:Array.isArray(t.from)?[...t.from]:t.from,to:Array.isArray(t.to)?[...t.to]:t.to,containers:[...t.containers]}))}class Qe{constructor(t){var n,i;this.matchesFrom=void 0,this.matchesTo=void 0,this.swup=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.name=void 0,this.scroll=!1,this.focus=void 0,this.logger=void 0,this.if=()=>!0,this.swup=t.swup,this.logger=t.logger,this.from=t.from||"",this.to=t.to||"",t.name&&(this.name=At(t.name)),t.scroll!==void 0&&(this.scroll=t.scroll),t.focus!==void 0&&(this.focus=t.focus),typeof t.if=="function"&&(this.if=t.if),this.containers=this.parseContainers(t.containers),y&&((n=this.logger)==null||n.errorIf(!this.to,"Every fragment rule must contain a 'to' path",this),(i=this.logger)==null||i.errorIf(!this.from,"Every fragment rule must contain a 'from' path",this)),this.matchesFrom=et(this.from),this.matchesTo=et(this.to)}parseContainers(t){var n,i;return Array.isArray(t)&&t.length?(i=t.map(o=>o.trim()),[...new Set(i)]).filter(o=>{var s;const r=this.validateSelector(o);return(s=this.logger)==null||s.errorIf(r instanceof Error,r),r===!0}):(y&&((n=this.logger)==null||n.error("Every fragment rule must contain an array of containers",this.getDebugInfo())),[])}validateSelector(t){return t.startsWith("#")?!t.match(/\s|>/)||new Error(`fragment selectors must not be nested: ${t}`):new Error(`fragment selectors must be IDs: ${t}`)}getDebugInfo(){const{from:t,to:n,containers:i}=this;return{from:String(t),to:String(n),containers:String(i)}}matches(t,n){var i;if(!this.if(n))return y&&((i=this.logger)==null||i.log("ignoring fragment rule due to custom rule.if:",this)),!1;const{url:o}=E.fromUrl(t.from),{url:s}=E.fromUrl(t.to);if(!this.matchesFrom(o)||!this.matchesTo(s))return!1;for(const a of this.containers){const l=this.validateFragmentSelectorForMatch(a);var r;if(l instanceof Error)return y&&((r=this.logger)==null||r.error(l,this.getDebugInfo())),!1}return!0}validateFragmentSelectorForMatch(t){return document.querySelector(t)?!!it(t,this.swup)||new Error(`skipping rule since ${$(t)} is outside of swup's default containers`):new Error(`skipping rule since ${$(t)} doesn't exist in the current document`)}}const tn=function(e){const t=Qt(e);t&&te(t,this.parsedRules,e)&&(e.scroll.reset=!1)},en=async function(e){const t=Qt(e);if(!t)return;const n=this.getFragmentVisit(t,e);if(!n)return;var i;e.fragmentVisit=n,y&&((i=this.logger)==null||i.log(`fragment visit: ${$(e.fragmentVisit.containers.join(", "))}`)),e.scroll=function(r,a){return typeof r.scroll=="boolean"?M({},a,{reset:r.scroll}):typeof r.scroll!="string"||a.target?a:M({},a,{target:r.scroll})}(n,e.scroll);const o=e.a11y;var s;n.focus!==void 0&&(y&&((s=this.logger)==null||s.errorIf(!o,"Can't set visit.a11y.focus. Is @swup/a11y-plugin installed?")),o&&(o.focus=n.focus)),e.animation.scope=e.fragmentVisit.containers,e.containers=e.fragmentVisit.containers,e.animation.selector=e.fragmentVisit.containers.join(","),kt(n,!0)},nn=function(e,t){var n,i;e.fragmentVisit&&ee(e.fragmentVisit)&&(y&&((n=this.logger)==null||n.log(`${$("out")}-animation skipped for ${$((i=e.fragmentVisit)==null?void 0:i.containers.toString())}`)),t.skip=!0)},sn=function(e,t){var n,i;e.fragmentVisit&&ee(e.fragmentVisit)&&(y&&((n=this.logger)==null||n.log(`${$("in")}-animation skipped for ${$((i=e.fragmentVisit)==null?void 0:i.containers.toString())}`)),t.skip=!0)},on=function(e,t){var n;if(e.trigger.el||!e.to.url)return;const i=this.swup.cache.get(e.to.url);i&&i.fragmentHtml&&(e.to.document=new DOMParser().parseFromString(i.fragmentHtml,"text/html"),e.to.html=i.fragmentHtml,y&&((n=this.logger)==null||n.log(`fragment cache used for ${$(e.to.url)}`)))},rn=function(e){kt(e.fragmentVisit,!0),Zt(this),(({swup:t,logger:n})=>{const i=t.getCurrentUrl(),o=t.cache,s=o.get(i);if(!s)return;const r=new DOMParser().parseFromString(s.html,"text/html"),a=[],l=Array.from(document.querySelectorAll("[data-swup-fragment]")).filter(c=>!c.matches("template")&&!vt(c,i));l.length&&(t.options.cache?(l.forEach(c=>{var u,d;if(c.querySelector("[data-swup-fragment]")!=null)return;const h=(u=c.__swupFragment)==null?void 0:u.url;if(!h)return void(y&&(n==null||n.warn("no fragment url found:",c)));const p=(d=c.__swupFragment)==null?void 0:d.selector;if(!p)return void(y&&(n==null||n.warn("no fragment selector found:",c)));const f=o.get(h);if(!f)return;const m=r.querySelector(p);if(!m)return;const v=new DOMParser().parseFromString(f.html,"text/html").querySelector(p);v&&(v.setAttribute("data-swup-fragment-url",h),m.replaceWith(v),a.push(c))}),a.length&&(o.update(i,{fragmentHtml:r.documentElement.outerHTML}),a.forEach(c=>{var u,d;const h=((u=c.__swupFragment)==null?void 0:u.url)||"",p=((d=c.__swupFragment)==null?void 0:d.selector)||"";y&&(n==null||n.log(`updated cache with ${$(p)} from ${$(h)}`))}))):y&&(n==null||n.warn("can't cache foreign fragment elements without swup's cache")))})(this)},an=function(e){kt(e.fragmentVisit,!1)};class ln extends K{get parsedRules(){return this._parsedRules}constructor(t){super(),this.name="SwupFragmentPlugin",this.requires={swup:">=4.6"},this._rawRules=[],this._parsedRules=[],this.options=void 0,this.defaults={rules:[],debug:!1},this.logger=void 0,this.options=M({},this.defaults,t)}mount(){const t=this.swup;var n;this.setRules(this.options.rules),y&&this.options.debug&&(this.logger=new Ze),this.before("link:self",tn),this.on("visit:start",en),this.before("animation:out:await",nn),this.before("animation:in:await",sn),this.before("content:replace",on),this.on("content:replace",rn),this.on("visit:end",an),y&&((n=this.logger)==null||n.warnIf(!t.options.cache,"fragment caching will only work with swup's cache being active")),Zt(this)}unmount(){super.unmount(),document.querySelectorAll("[data-swup-fragment]").forEach(t=>{t.removeAttribute("data-swup-fragment-url"),delete t.__swupFragment})}setRules(t){var n;this._rawRules=qt(t),this._parsedRules=t.map(i=>this.parseRule(i)),y&&((n=this.logger)==null||n.log("Updated fragment rules",this.getRules()))}getRules(){return qt(this._rawRules)}prependRule(t){this.setRules([t,...this.getRules()])}appendRule(t){this.setRules([...this.getRules(),t])}parseRule(t){return new Qe(M({},t,{logger:this.logger,swup:this.swup}))}getFragmentVisit(t,n){const i=te(t,this.parsedRules,n||this.swup.createVisit(t));if(!i)return;const o=((l,c,u,d)=>{let h=c.map(f=>{const m=document.querySelector(f);return m?it(f,u)?{selector:f,el:m}:(y&&(d==null||d.error(`${$(f)} is outside of swup's default containers`)),!1):(y&&(d==null||d.log(`${$(f)} missing in current document`)),!1)}).filter(f=>!!f);const p=h.every(f=>vt(f.el,l.to));return Pt(l.from,l.to)||p&&u.options.linkToSelf==="navigate"||(h=h.filter(f=>!vt(f.el,l.to)||(y&&(d==null||d.log(`ignoring fragment ${$(f.selector)} as it already matches the current URL`)),!1))),h.map(f=>f.selector)})(t,i.containers,this.swup,this.logger);if(!o.length)return;const{name:s,scroll:r,focus:a}=i;return{containers:o,name:s,scroll:r,focus:a}}}function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wt.apply(this,arguments)}class cn{constructor(t){this._raf=null,this._positionY=0,this._velocityY=0,this._targetPositionY=0,this._targetPositionYWithOffset=0,this._direction=0,this.scrollTo=n=>{if(n&&n.nodeType)this._targetPositionY=Math.round(n.getBoundingClientRect().top+window.pageYOffset);else{if(parseInt(this._targetPositionY)!==this._targetPositionY)return void console.error("Argument must be a number or an element.");this._targetPositionY=Math.round(n)}this._targetPositionY>document.documentElement.scrollHeight-window.innerHeight&&(this._targetPositionY=document.documentElement.scrollHeight-window.innerHeight),this._positionY=document.body.scrollTop||document.documentElement.scrollTop,this._direction=this._positionY>this._targetPositionY?-1:1,this._targetPositionYWithOffset=this._targetPositionY+this._direction,this._velocityY=0,this._positionY!==this._targetPositionY?(this.options.onStart(),this._animate()):this.options.onAlreadyAtPositions()},this._animate=()=>{this._update(),this._render(),this._direction===1&&this._targetPositionY>this._positionY||this._direction===-1&&this._targetPositionY<this._positionY?(this._raf=requestAnimationFrame(this._animate),this.options.onTick()):(this._positionY=this._targetPositionY,this._render(),this._raf=null,this.options.onTick(),this.options.onEnd())},this._update=()=>{const n=this._targetPositionYWithOffset-this._positionY;return this._velocityY+=n*this.options.acceleration,this._velocityY*=this.options.friction,this._positionY+=this._velocityY,Math.abs(n)},this._render=()=>{window.scrollTo(0,this._positionY)},this.options=wt({},{onAlreadyAtPositions:()=>{},onCancel:()=>{},onEnd:()=>{},onStart:()=>{},onTick:()=>{},friction:.7,acceleration:.04},t),t&&t.friction&&(this.options.friction=1-t.friction),window.addEventListener("mousewheel",n=>{this._raf&&(this.options.onCancel(),cancelAnimationFrame(this._raf),this._raf=null)},{passive:!0})}}function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yt.apply(this,arguments)}class un extends K{constructor(t={}){super(),this.name="SwupScrollPlugin",this.requires={swup:">=4.2.0"},this.scrl=void 0,this.defaults={doScrollingRightAway:!1,animateScroll:{betweenPages:!0,samePageWithHash:!0,samePage:!0},scrollFriction:.3,scrollAcceleration:.04,getAnchorElement:void 0,offset:0,scrollContainers:"[data-swup-scroll-container]",shouldResetScrollPosition:()=>!0,markScrollTarget:!1},this.options=void 0,this.cachedScrollPositions={},this.previousScrollRestoration=void 0,this.currentCacheKey=void 0,this.getAnchorElement=(n="")=>typeof this.options.getAnchorElement=="function"?this.options.getAnchorElement(n):this.swup.getAnchorElement(n),this.getOffset=n=>n?typeof this.options.offset=="function"?parseInt(String(this.options.offset(n)),10):parseInt(String(this.options.offset),10):0,this.onBeforeLinkToSelf=n=>{n.scroll.animate=this.shouldAnimate("samePage")},this.handleScrollToTop=n=>{var i,o;return(i=(o=this.swup).scrollTo)==null||i.call(o,0,n.scroll.animate),!0},this.onBeforeLinkToAnchor=n=>{n.scroll.animate=this.shouldAnimate("samePageWithHash")},this.handleScrollToAnchor=(n,{hash:i})=>this.maybeScrollToAnchor(i,n.scroll.animate),this.onBeforeVisitStart=n=>{n.scroll.scrolledToContent=!1,n.scroll.animate=this.shouldAnimate("betweenPages")},this.onVisitStart=n=>{var i;this.cacheScrollPositions(n.from.url),this.maybeResetScrollPositions(n);const o=(i=n.scroll.target)!=null?i:n.to.hash;n.scroll.animate&&this.options.doScrollingRightAway&&!o&&this.doScrollingBetweenPages(n)},this.handleScrollToContent=n=>{n.scroll.scrolledToContent||this.doScrollingBetweenPages(n),this.restoreScrollContainers(n.to.url)},this.doScrollingBetweenPages=n=>{var i,o;if(n.history.popstate&&!n.animation.animate)return;const s=(i=n.scroll.target)!=null?i:n.to.hash;if(s&&this.maybeScrollToAnchor(s,n.scroll.animate)||!n.scroll.reset)return;const r=this.getCachedScrollPositions(n.to.url),a=(r==null||(o=r.window)==null?void 0:o.top)||0;requestAnimationFrame(()=>{var l,c;return(l=(c=this.swup).scrollTo)==null?void 0:l.call(c,a,n.scroll.animate)}),n.scroll.scrolledToContent=!0},this.maybeResetScrollPositions=n=>{const{popstate:i}=n.history,{url:o}=n.to,{el:s}=n.trigger;i||s&&!this.options.shouldResetScrollPosition(s)||this.resetScrollPositions(o)},this.options=yt({},this.defaults,t)}mount(){const t=this.swup;t.hooks.create("scroll:start"),t.hooks.create("scroll:end");const n=this.swup.createVisit({to:this.swup.currentPageUrl});this.scrl=new cn({onStart:()=>t.hooks.callSync("scroll:start",n,void 0),onEnd:()=>t.hooks.callSync("scroll:end",n,void 0),onCancel:()=>t.hooks.callSync("scroll:end",n,void 0),friction:this.options.scrollFriction,acceleration:this.options.scrollAcceleration}),t.scrollTo=(i,o=!0)=>{o?this.scrl.scrollTo(i):(t.hooks.callSync("scroll:start",n,void 0),window.scrollTo(0,i),t.hooks.callSync("scroll:end",n,void 0))},this.previousScrollRestoration=window.history.scrollRestoration,t.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.updateScrollTarget=this.updateScrollTarget.bind(this),this.options.markScrollTarget&&(window.addEventListener("popstate",this.updateScrollTarget),window.addEventListener("hashchange",this.updateScrollTarget),this.on("page:view",this.updateScrollTarget),this.on("link:anchor",this.updateScrollTarget),this.on("link:self",this.updateScrollTarget),this.updateScrollTarget()),this.before("visit:start",this.onBeforeVisitStart,{priority:-1}),this.on("visit:start",this.onVisitStart,{priority:1}),this.replace("content:scroll",this.handleScrollToContent),this.before("link:self",this.onBeforeLinkToSelf,{priority:-1}),this.replace("scroll:top",this.handleScrollToTop),this.before("link:anchor",this.onBeforeLinkToAnchor,{priority:-1}),this.replace("scroll:anchor",this.handleScrollToAnchor)}unmount(){super.unmount(),this.previousScrollRestoration&&(window.history.scrollRestoration=this.previousScrollRestoration),window.removeEventListener("popstate",this.updateScrollTarget),window.removeEventListener("hashchange",this.updateScrollTarget),this.cachedScrollPositions={},delete this.swup.scrollTo,delete this.scrl}shouldAnimate(t){return typeof this.options.animateScroll=="boolean"?this.options.animateScroll:this.options.animateScroll[t]}maybeScrollToAnchor(t,n=!1){var i,o;if(!t)return!1;const s=this.getAnchorElement(t);if(!s)return console.warn(`Anchor target ${t} not found`),!1;if(!(s instanceof Element))return console.warn(`Anchor target ${t} is not a DOM node`),!1;const{top:r}=s.getBoundingClientRect(),a=r+window.scrollY-this.getOffset(s);return(i=(o=this.swup).scrollTo)==null||i.call(o,a,n),!0}cacheScrollPositions(t){const n=this.swup.resolveUrl(t),i=W(this.options.scrollContainers).map(s=>({top:s.scrollTop,left:s.scrollLeft})),o={window:{top:window.scrollY,left:window.scrollX},containers:i};this.cachedScrollPositions[n]=o}resetScrollPositions(t){const n=this.swup.resolveUrl(t);delete this.cachedScrollPositions[n]}getCachedScrollPositions(t){const n=this.swup.resolveUrl(t);return this.cachedScrollPositions[n]}restoreScrollContainers(t){const n=this.getCachedScrollPositions(t);n&&n.containers.length!==0&&W(this.options.scrollContainers).forEach((i,o)=>{const s=n.containers[o];s!=null&&(i.scrollTop=s.top,i.scrollLeft=s.left)})}updateScrollTarget(){var t;const{hash:n}=window.location,i=document.querySelector("[data-swup-scroll-target]");let o=this.getAnchorElement(n);o instanceof HTMLBodyElement&&(o=null),i!==o&&(i==null||i.removeAttribute("data-swup-scroll-target"),(t=o)==null||t.setAttribute("data-swup-scroll-target",""))}}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},st.apply(this,arguments)}const hn={from:"(.*)",to:"(.*)",out:e=>e(),in:e=>e()};class dn extends K{constructor(t){var n,i;super(),n=this,this.name="SwupJsPlugin",this.requires={swup:">=4"},this.defaults={animations:[],matchOptions:{}},this.options=void 0,this.animations=[],this.awaitOutAnimation=async function(o,{skip:s}){s||await n.findAndRunAnimation(o,"out")},this.awaitInAnimation=async function(o,{skip:s}){s||await n.findAndRunAnimation(o,"in")},Array.isArray(t)&&(t={animations:t}),this.options=st({},this.defaults,t),this.options.animations.push(hn),this.animations=(i=this.options.matchOptions,this.options.animations.map(o=>function(s,r){return st({},s,{matchesFrom:et(s.from,r),matchesTo:et(s.to,r)})}(o,i)))}mount(){this.replace("animation:out:await",this.awaitOutAnimation,{priority:-1}),this.replace("animation:in:await",this.awaitInAnimation,{priority:-1})}async findAndRunAnimation(t,n){const i=function(o,s){return function(r,a,l,c){let u=0;return r.reduceRight((h,p)=>{const f=function(m,v,g,b){let O=0;const w=m.matchesFrom(v);return w&&(O+=1),m.matchesTo(g)&&(O+=1),w&&m.to===b&&(O+=2),O}(p,a,l,c);return f>=u?(u=f,p):h},null)}(o,s.from.url,s.to.url,s.animation.name)}(this.animations,t);if(i){const o=function(s,r,a){const l=s.matchesFrom(r.from.url),c=s.matchesTo(r.to.url);return{visit:r,direction:a,from:{url:r.from.url,pattern:s.from,params:l?l.params:{}},to:{url:r.to.url,pattern:s.to,params:c?c.params:{}}}}(i,t,n);await function(s,r){const{direction:a}=r,l=s[a];return l?new Promise(c=>{const u=l(()=>c(),r);Tt(u)&&u.then(c)}):(console.warn(`Missing animation function for '${a}' phase`),Promise.resolve())}(i,o)}}}function fn(e,t){e.indexOf(t)===-1&&e.push(t)}const ne=(e,t,n)=>Math.min(Math.max(n,e),t),x={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ot=e=>typeof e=="number",F=e=>Array.isArray(e)&&!ot(e[0]),pn=(e,t,n)=>{const i=t-e;return((n-e)%i+i)%i+e};function mn(e,t){return F(e)?e[pn(0,e.length,t)]:e}const ie=(e,t,n)=>-n*e+n*t+e,se=()=>{},C=e=>e,$t=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function oe(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const o=$t(0,t,i);e.push(ie(n,1,o))}}function gn(e){const t=[0];return oe(t,e-1),t}function vn(e,t=gn(e.length),n=C){const i=e.length,o=i-t.length;return o>0&&oe(t,o),s=>{let r=0;for(;r<i-2&&!(s<t[r+1]);r++);let a=ne(0,1,$t(t[r],t[r+1],s));return a=mn(n,r)(a),ie(e[r],e[r+1],a)}}const re=e=>Array.isArray(e)&&ot(e[0]),St=e=>typeof e=="object"&&!!e.createAnimation,I=e=>typeof e=="function",wn=e=>typeof e=="string",Y={ms:e=>e*1e3,s:e=>e/1e3},ae=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,yn=1e-7,Sn=12;function bn(e,t,n,i,o){let s,r,a=0;do r=t+(n-t)/2,s=ae(r,i,o)-e,s>0?n=r:t=r;while(Math.abs(s)>yn&&++a<Sn);return r}function j(e,t,n,i){if(e===t&&n===i)return C;const o=s=>bn(s,0,1,e,n);return s=>s===0||s===1?s:ae(o(s),t,i)}const En=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*e,o=t==="end"?Math.floor(i):Math.ceil(i);return ne(0,1,o/e)},An={ease:j(.25,.1,.25,1),"ease-in":j(.42,0,1,1),"ease-in-out":j(.42,0,.58,1),"ease-out":j(0,0,.58,1)},Tn=/\((.*?)\)/;function Ft(e){if(I(e))return e;if(re(e))return j(...e);const t=An[e];if(t)return t;if(e.startsWith("steps")){const n=Tn.exec(e);if(n){const i=n[1].split(",");return En(parseFloat(i[0]),i[1].trim())}}return C}class le{constructor(t,n=[0,1],{easing:i,duration:o=x.duration,delay:s=x.delay,endDelay:r=x.endDelay,repeat:a=x.repeat,offset:l,direction:c="normal",autoplay:u=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=C,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((h,p)=>{this.resolve=h,this.reject=p}),i=i||x.easing,St(i)){const h=i.createAnimation(n);i=h.easing,n=h.keyframes||n,o=h.duration||o}this.repeat=a,this.easing=F(i)?C:Ft(i),this.updateDuration(o);const d=vn(n,l,F(i)?i.map(Ft):C);this.tick=h=>{var p;s=s;let f=0;this.pauseTime!==void 0?f=this.pauseTime:f=(h-this.startTime)*this.rate,this.t=f,f/=1e3,f=Math.max(f-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(f=this.totalDuration);const m=f/this.duration;let v=Math.floor(m),g=m%1;!g&&m>=1&&(g=1),g===1&&v--;const b=v%2;(c==="reverse"||c==="alternate"&&b||c==="alternate-reverse"&&!b)&&(g=1-g);const O=f>=this.totalDuration?1:Math.min(g,1),w=d(this.easing(O));t(w),this.pauseTime===void 0&&(this.playState==="finished"||f>=this.totalDuration+r)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,w)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},u&&this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class Pn{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const dt=new WeakMap;function ce(e){return dt.has(e)||dt.set(e,{transforms:[],values:new Map}),dt.get(e)}function kn(e,t){return e.has(t)||e.set(t,new Pn),e.get(t)}const $n=["","X","Y","Z"],On=["translate","scale","rotate","skew"],rt={x:"translateX",y:"translateY",z:"translateZ"},It={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},Rn={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:It,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:C},skew:It},z=new Map,Ot=e=>`--motion-${e}`,at=["x","y","z"];On.forEach(e=>{$n.forEach(t=>{at.push(e+t),z.set(Ot(e+t),Rn[e])})});const _n=(e,t)=>at.indexOf(e)-at.indexOf(t),xn=new Set(at),ue=e=>xn.has(e),Cn=(e,t)=>{rt[t]&&(t=rt[t]);const{transforms:n}=ce(e);fn(n,t),e.style.transform=Ln(n)},Ln=e=>e.sort(_n).reduce(Vn,"").trim(),Vn=(e,t)=>`${e} ${t}(var(${Ot(t)}))`,bt=e=>e.startsWith("--"),Ht=new Set;function Mn(e){if(!Ht.has(e)){Ht.add(e);try{const{syntax:t,initialValue:n}=z.has(e)?z.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:n})}catch{}}}const ft=(e,t)=>document.createElement("div").animate(e,t),jt={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{ft({opacity:[1]})}catch{return!1}return!0},finished:()=>!!ft({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{ft({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},pt={},q={};for(const e in jt)q[e]=()=>(pt[e]===void 0&&(pt[e]=jt[e]()),pt[e]);const Un=.015,Dn=(e,t)=>{let n="";const i=Math.round(t/Un);for(let o=0;o<i;o++)n+=e($t(0,i-1,o))+", ";return n.substring(0,n.length-2)},Nt=(e,t)=>I(e)?q.linearEasing()?`linear(${Dn(e,t)})`:x.easing:re(e)?qn(e):e,qn=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`;function Fn(e,t){for(let n=0;n<e.length;n++)e[n]===null&&(e[n]=n?e[n-1]:t());return e}const In=e=>Array.isArray(e)?e:[e];function Et(e){return rt[e]&&(e=rt[e]),ue(e)?Ot(e):e}const Q={get:(e,t)=>{t=Et(t);let n=bt(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!n&&n!==0){const i=z.get(t);i&&(n=i.initialValue)}return n},set:(e,t,n)=>{t=Et(t),bt(t)?e.style.setProperty(t,n):e.style[t]=n}};function he(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function Hn(e,t){var n;let i=(t==null?void 0:t.toDefaultUnit)||C;const o=e[e.length-1];if(wn(o)){const s=((n=o.match(/(-?[\d.]+)([a-z%]*)/))===null||n===void 0?void 0:n[2])||"";s&&(i=r=>r+s)}return i}function jn(){return window.__MOTION_DEV_TOOLS_RECORD}function Nn(e,t,n,i={},o){const s=jn(),r=i.record!==!1&&s;let a,{duration:l=x.duration,delay:c=x.delay,endDelay:u=x.endDelay,repeat:d=x.repeat,easing:h=x.easing,persist:p=!1,direction:f,offset:m,allowWebkitAcceleration:v=!1,autoplay:g=!0}=i;const b=ce(e),O=ue(t);let w=q.waapi();O&&Cn(e,t);const T=Et(t),P=kn(b.values,T),R=z.get(T);return he(P.animation,!(St(h)&&P.generator)&&i.record!==!1),()=>{const _=()=>{var A,H;return(H=(A=Q.get(e,T))!==null&&A!==void 0?A:R==null?void 0:R.initialValue)!==null&&H!==void 0?H:0};let S=Fn(In(n),_);const U=Hn(S,R);if(St(h)){const A=h.createAnimation(S,t!=="opacity",_,T,P);h=A.easing,S=A.keyframes||S,l=A.duration||l}if(bt(T)&&(q.cssRegisterProperty()?Mn(T):w=!1),O&&!q.linearEasing()&&(I(h)||F(h)&&h.some(I))&&(w=!1),w){R&&(S=S.map(L=>ot(L)?R.toDefaultUnit(L):L)),S.length===1&&(!q.partialKeyframes()||r)&&S.unshift(_());const A={delay:Y.ms(c),duration:Y.ms(l),endDelay:Y.ms(u),easing:F(h)?void 0:Nt(h,l),direction:f,iterations:d+1,fill:"both"};a=e.animate({[T]:S,offset:m,easing:F(h)?h.map(L=>Nt(L,l)):void 0},A),a.finished||(a.finished=new Promise((L,fe)=>{a.onfinish=L,a.oncancel=fe}));const H=S[S.length-1];a.finished.then(()=>{p||(Q.set(e,T,H),a.cancel())}).catch(se),v||(a.playbackRate=1.000001)}else if(o&&O)S=S.map(A=>typeof A=="string"?parseFloat(A):A),S.length===1&&S.unshift(parseFloat(_())),a=new o(A=>{Q.set(e,T,U?U(A):A)},S,Object.assign(Object.assign({},i),{duration:l,easing:h}));else{const A=S[S.length-1];Q.set(e,T,R&&ot(A)?R.toDefaultUnit(A):A)}return r&&s(e,t,S,{duration:l,delay:c,easing:h,repeat:d,offset:m},"motion-one"),P.setAnimation(a),a&&!g&&a.pause(),a}}const Bn=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function Yn(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const Wn=e=>e(),de=(e,t,n=x.duration)=>new Proxy({animations:e.map(Wn).filter(Boolean),duration:n,options:t},Kn),zn=e=>e.animations[0],Kn={get:(e,t)=>{const n=zn(e);switch(t){case"duration":return e.duration;case"currentTime":return Y.s((n==null?void 0:n[t])||0);case"playbackRate":case"playState":return n==null?void 0:n[t];case"finished":return e.finished||(e.finished=Promise.all(e.animations.map(Xn)).catch(se)),e.finished;case"stop":return()=>{e.animations.forEach(i=>he(i))};case"forEachNative":return i=>{e.animations.forEach(o=>i(o,e))};default:return typeof(n==null?void 0:n[t])>"u"?void 0:()=>e.animations.forEach(i=>i[t]())}},set:(e,t,n)=>{switch(t){case"currentTime":n=Y.ms(n);case"playbackRate":for(let i=0;i<e.animations.length;i++)e.animations[i][t]=n;return!0}return!1}},Xn=e=>e.finished;function Gn(e,t,n){return I(e)?e(t,n):e}function Jn(e){return function(n,i,o={}){n=Yn(n);const s=n.length,r=[];for(let a=0;a<s;a++){const l=n[a];for(const c in i){const u=Bn(o,c);u.delay=Gn(u.delay,a,s);const d=Nn(l,c,i[c],u,e);r.push(d)}}return de(r,o,o.duration)}}const Zn=Jn(le);function Qn(e,t={}){return de([()=>{const n=new le(e,[0,1],t);return n.finished.catch(()=>{}),n}],t,t.duration)}function Bt(e,t,n){return(I(e)?Qn:Zn)(e,t,n)}let Yt=document.getElementById("sail");function ti(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}const li=new ze({animateHistoryBrowsing:!0,containers:["#main"],plugins:[new dn({animations:[{from:"(.*)",to:"(.*)",out:async()=>{await Bt(Yt,{opacity:1},{duration:.6,easing:ti}).finished},in:async()=>{await Bt(Yt,{opacity:0},{duration:.2,easing:"linear"}).finished}}]}),new ln({rules:[{from:"/collections/:handle?",to:"/collections/:handle?",containers:["#collection"]}]}),new Xe({preloadVisibleLinks:!0}),new Je,new un({doScrollingRightAway:!1,animateScroll:{betweenPages:!1,samePageWithHash:!0,samePage:!0}})]});export{Bt as a,ti as c,li as s};
